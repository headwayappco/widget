import Vue from "vue";
import {
  Meta,
  Preview,
  Story,
  Props,
  Source,
  SourceState,
} from "@storybook/addon-docs/blocks";
import { text, withKnobs } from "@storybook/addon-knobs";
import HeadwayWidget from "../src/HeadwayWidget";

<Meta title="HeadwayWidget" decorators={[withKnobs]} />

# HeadwayWidget

## Basic usage

The simplest possible usage, just set your _account_ id.

<Preview withSource="none">
  <Story name="Basic">
    {{
      template:
        '<headway-widget account="J1LKG7"><logo></logo></headway-widget>',
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget account="J1LKG7">Logo</headway-widget>
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
  };
</script>
```

## Badge position

You can change badge position to one of 9 possible values. Check all of them in the Api reference at the end of this page.

<Preview withSource="none">
  <Story name="Badge Position">
    {{
      template:
        '<headway-widget account="J1LKG7" id="widget-badge-position" badgePosition="center-left"><logo></logo></headway-widget>',
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget
      account="J1LKG7"
      id="widget-badge-position"
      badgePosition="center-left"
      >Logo</headway-widget
    >
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
  };
</script>
```

## Widget position

You can change widget position to one of 6 possible values. Check all of them in the Api reference at the end of this page.

<Preview withSource="none">
  <Story name="Widget Position">
    {{
      template:
        '<headway-widget account="J1LKG7" id="widget-position" position="center-left"><logo></logo></headway-widget>',
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget account="J1LKG7" position="center-left"
      >Logo</headway-widget
    >
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
  };
</script>
```

## External trigger

Widget can be triggered by any other element on the page. To achieve that use HeadwayWidgetTrigger and set its `widgetId`
prop to corresponding widget `id`.

<Preview withSource="none">
  <Story name="External trigger">
    {{
      template: `<div style="display: flex">
            <headway-widget account="J1LKG7" id="4">
                <logo></logo>
            </headway-widget>
            <headway-widget-trigger widgetId="4">
                <button>Trigger</button>
            </headway-widget-trigger>
        </div>`,
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget account="J1LKG7" position="center-left" id="idOfYourChoice"
      >Logo</headway-widget
    >
    <headway-widget-trigger widgetId="idOfYourChoice">
      <button>Trigger</button>
    </headway-widget-trigger>
  </div>
</template>

<script>
  import { HeadwayWidget, HeadwayWidgetTrigger } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
      "headway-widget-trigger": HeadwayWidgetTrigger,
    },
  };
</script>
```

## Callbacks

You can add some handlers of Widget actions. Open developer tools, click around widget below and observe
logged names.

<Preview withSource="none">
  <Story name="Callbacks">
    {{
      template: `<headway-widget
        account="J1LKG7"
        id="callbacks"
        v-on:widgetReady="widgetReady"
        v-on:showWidget="showWidget"
        v-on:showDetails="showDetails"
        v-on:readMore="readMore"
        v-on:hideWidget="hideWidget"
        >
                <logo></logo>
        </headway-widget>`,
      methods: {
        widgetReady: () => {
          console.log("widgetReady");
        },
        showWidget: () => {
          console.log("showWidget");
        },
        showDetails: () => {
          console.log("showDetails");
        },
        readMore: () => {
          console.log("readMore");
        },
        hideWidget: () => {
          console.log("hideWidget");
        },
      },
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget
      account="J1LKG7"
      v-on:widgetReady="widgetReady"
      v-on:showWidget="showWidget"
      v-on:showDetails="showDetails"
      v-on:readMore="readMore"
      v-on:hideWidget="hideWidget"
    >
      Logo
    </headway-widget>
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
    methods: {
      widgetReady: () => {
        console.log("widgetReady");
      },
      showWidget: () => {
        console.log("showWidget");
      },
      showDetails: () => {
        console.log("showDetails");
      },
      readMore: () => {
        console.log("readMore");
      },
      hideWidget: () => {
        console.log("hideWidget");
      },
    },
  };
</script>
```

## Translations

You can translate widget labels.

<Preview withSource="none">
  <Story name="Translations">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-translations" v-bind:translations="translations">
                <logo></logo>
            </headway-widget>`,
      data: () => ({
        translations: {
          title: "Registro de cambios",
          readMore: "Lee mas",
          labels: {
            new: "nuevo",
            update: "actualizar",
            improvement: "mejora",
          },
          footer: "Lee mas ðŸ‘‰",
        },
      }),
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget account="J1LKG7" v-bind:translations="translations">
      Logo
    </headway-widget>
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
    data: () => ({
      translations: {
        title: "Registro de cambios",
        readMore: "Lee mas",
        labels: {
          new: "nuevo",
          update: "actualizar",
          improvement: "mejora",
        },
        footer: "Lee mas ðŸ‘‰",
      },
    }),
  };
</script>
```

## Options

You can pass options in a classic way.

<Preview withSource="none">
  <Story name="Options">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-options" v-bind:options="options">
                <logo></logo>
            </headway-widget>`,
      data: () => ({
        options: {
          badgePosition: "top-left",
          callbacks: {
            onShowWidget: () => {
              alert("Hello");
            },
          },
        },
      }),
    }}
  </Story>
</Preview>

```html
<template>
  <div>
    <headway-widget account="J1LKG7" v-bind:options="options">
      Logo
    </headway-widget>
  </div>
</template>

<script>
  import { HeadwayWidget } from "@headwayapp/vue-widget";

  export default {
    name: "App",
    components: {
      "headway-widget": HeadwayWidget,
    },
    data: () => ({
      options: {
        badgePosition: "top-left",
        callbacks: {
          onShowWidget: () => {
            alert("Hello");
          },
        },
      },
    }),
  };
</script>
```

## Api reference

<Props of={HeadwayWidget} />
