import {
  Meta,
  Preview,
  Story,
  Props,
  Source,
  SourceState,
} from "@storybook/addon-docs/blocks";
import { moduleMetadata } from "@storybook/angular";
import { number, select } from "@storybook/addon-knobs";
//import Logo from './logo';
import { Headway, HeadwayWidget } from "../src/index";
import { text, withKnobs } from "@storybook/addon-knobs";
import { Logo } from "./Logo.ts";

<Meta
  title="HeadwayWidget"
  decorators={[
    withKnobs,
    moduleMetadata({ declarations: [HeadwayWidget, Logo] }),
  ]}
/>

# HeadwayWidget

## Basic usage

The simplest possible usage, just set your _account_ id.

<Preview withSource="none">
  <Story name="Basic">
    {{
      template:
        '<headway-widget account="J1LKG7"><logo></logo></headway-widget>',
      props: () => ({}),
    }}
  </Story>
</Preview>

```html
<headway-widget account="J1LKG7"><logo></logo></headway-widget>
```

## Badge position

You can change badge position to one of 9 possible values. Check all of them in the Api reference at the end of this page.

<Preview withSource="none">
  <Story name="Badge Position">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-badge"
      badgePosition="center-left"><logo></logo></headway-widget>`,
      props: () => ({}),
    }}
  </Story>
</Preview>

```html
<headway-widget account="J1LKG7" id="widget-badge" badgePosition="center-left">
  <logo></logo>
</headway-widget>
```

## Widget position

You can change widget position to one of 6 possible values. Check all of them in the Api reference at the end of this page.

<Preview withSource="none">
  <Story name="Widget Position">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-badge"
      position="bottom-left"><logo></logo></headway-widget>`,
      props: () => ({}),
    }}
  </Story>
</Preview>

```html
<headway-widget account="J1LKG7" id="widget-badge" position="bottom-right">
  <logo></logo>
</headway-widget>
```

## External trigger

Widget can be triggered by any other element on the page. To achieve that use HeadwayWidgetTrigger and set its `forId`
prop to corresponding widget `id`.

XXX

## Callbacks

You can add some handlers of Widget actions. Open developer tools, click around widget below and observe
logged names.

<Preview withSource="none">
  <Story name="Callbacks">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-badge"
      (widgetReady)="log('Widget is ready')"
      (showWidget)="log('Widget shown')"
      (readMore)="log('Read more clicked')"
      (showDetails)="log('Show more clicked')"
      (hideWidget)="log('Widget hidden')" ><logo></logo></headway-widget>`,
      props: {
        log: console.log,
      },
    }}
  </Story>
</Preview>

```html
<headway-widget
  account="J1LKG7"
  id="widget-handlers"
  (widgetReady)="log('Widget is ready')"
  (showWidget)="log('Widget shown')"
  (readMore)="log('Read more clicked')"
  (showDetails)="log('Show more clicked')"
  (hideWidget)="log('Widget hidden')"
>
  <logo></logo>
</headway-widget>
```

## Translations

You can translate widget labels.

<Preview withSource="none">
  <Story name="Translations">
    {{
      template: `<headway-widget account="J1LKG7" id="widget-translations"
      [translations]="translations"><logo></logo></headway-widget>`,
      props: {
        translations: {
          title: "Registro de cambios",
          readMore: "Lee mas",
          labels: {
            new: "nuevo",
            update: "actualizar",
            improvement: "mejora",
          },
          footer: "Lee mas ðŸ‘‰",
        },
      },
    }}
  </Story>
</Preview>

```typescript
@Component({
  selector: "app",
  template: `<headway-widget
    account="J1LKG7"
    id="widget-translations"
    [translations]="translations"
  >
    <logo></logo>
  </headway-widget>`,
})
export class AppComponent {
  translations = {
    title: "Registro de cambios",
    readMore: "Lee mas",
    labels: {
      new: "nuevo",
      update: "actualizar",
      improvement: "mejora",
    },
    footer: "Lee mas ðŸ‘‰",
  };
}
```

## Api reference

<Props of={HeadwayWidget} />
